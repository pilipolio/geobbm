<!DOCTYPE html>
<html>
<head>
	<title>Homemade counties map</title>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="css/d3counties.css" />
    
</head>
<body>
	<script src="js/d3.min.js"></script>
	<script src="js/d3counties.js"></script>
	<script src="data/uk_multi_polygons_250.json"></script>
	<script src="data/counties_simp250.json"></script>

	<script>
    var width = 300,
        height = 600;

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);

    var projections = {
        "mercator": d3.geo.mercator(),
        "alberts": d3.geo.albers().center([0, 55.4]).rotate([4.4, 0]).parallels([50, 60])
        }
    
    //oldDrawAccordingToProjection(svg, ".county", projections.alberts, counties)    
    //var countiesFeatures = counties.features

    var counties = uk
    var countiesFeatures = [uk]
    var featurePaths = svg.selectAll(".county")
        .data(countiesFeatures)
        .enter().append("path");
        
    var featurePaths = drawAccordingToProjection(projections.alberts, counties, featurePaths).attr("class","countyA");
    
    svg.on("click", function(d) { 
        //d3.selectAll("path").remove()
        featurePaths = featurePaths.transition()
        featurePaths = drawAccordingToProjection(projections.mercator, counties, featurePaths).attr("class","countyB")
            .duration(2000) // this is 1s
            .delay(100)
            .ease('linear')
    })
    
	</script>
</body>
</html>
